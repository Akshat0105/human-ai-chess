/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/chess.js@0.12.0/chess.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var Chess=function(r){var e="b",n="w",t=-1,o="p",i="b",f="k",u="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",l=["1-0","0-1","1/2-1/2","*"],a={b:[16,32,17,15],w:[-16,-32,-17,-15]},c={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},s=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],v={p:0,n:1,b:2,r:3,q:4,k:5},g={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},h={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},d={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},E={w:[{square:d.a1,flag:h.QSIDE_CASTLE},{square:d.h1,flag:h.KSIDE_CASTLE}],b:[{square:d.a8,flag:h.QSIDE_CASTLE},{square:d.h8,flag:h.KSIDE_CASTLE}]},m=new Array(128),b={w:t,b:t},_=n,A={w:0,b:0},C=t,y=0,S=1,I=[],T={},w={};function P(r){void 0===r&&(r=!1),m=new Array(128),b={w:t,b:t},_=n,A={w:0,b:0},C=t,y=0,S=1,I=[],r||(T={}),w={},D(k())}function R(){for(var r=[],e={},n=function(r){r in w&&(e[r]=w[r])};I.length>0;)r.push(J());for(n(k());r.length>0;)z(r.pop()),n(k());w=e}function L(){O(u)}function O(r,o){void 0===o&&(o=!1);var i=r.split(/\s+/),f=i[0],u=0;if(!N(r).valid)return!1;P(o);for(var l=0;l<f.length;l++){var a=f.charAt(l);if("/"===a)u+=8;else if(-1!=="0123456789".indexOf(a))u+=parseInt(a,10);else{var c=a<"a"?n:e;Q({type:a.toLowerCase(),color:c},rr(u)),u++}}return _=i[1],i[2].indexOf("K")>-1&&(A.w|=h.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(A.w|=h.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(A.b|=h.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(A.b|=h.QSIDE_CASTLE),C="-"===i[3]?t:d[i[3]],y=parseInt(i[4],10),S=parseInt(i[5],10),D(k()),!0}function N(r){var e="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",f="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",l="1st field (piece positions) does not contain 8 '/'-delimited rows.",a="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",s="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",v=r.split(/\s+/);if(6!==v.length)return{valid:!1,error_number:1,error:n};if(isNaN(v[5])||parseInt(v[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(v[4])||parseInt(v[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(v[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(v[2]))return{valid:!1,error_number:5,error:f};if(!/^(w|b)$/.test(v[1]))return{valid:!1,error_number:6,error:u};var g=v[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:l};for(var h=0;h<g.length;h++){for(var d=0,E=!1,m=0;m<g[h].length;m++)if(isNaN(g[h][m])){if(!/^[prnbqkPRNBQK]$/.test(g[h][m]))return{valid:!1,error_number:9,error:c};d+=1,E=!1}else{if(E)return{valid:!1,error_number:8,error:a};d+=parseInt(g[h][m],10),E=!0}if(8!==d)return{valid:!1,error_number:10,error:s}}return"3"==v[3][1]&&"w"==v[1]||"6"==v[3][1]&&"b"==v[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:e}}function k(){for(var r=0,o="",i=d.a8;i<=d.h1;i++){if(null==m[i])r++;else{r>0&&(o+=r,r=0);var f=m[i].color,u=m[i].type;o+=f===n?u.toUpperCase():u.toLowerCase()}i+1&136&&(r>0&&(o+=r),i!==d.h1&&(o+="/"),r=0,i+=8)}var l="";A[n]&h.KSIDE_CASTLE&&(l+="K"),A[n]&h.QSIDE_CASTLE&&(l+="Q"),A[e]&h.KSIDE_CASTLE&&(l+="k"),A[e]&h.QSIDE_CASTLE&&(l+="q"),l=l||"-";var a=C===t?"-":rr(C);return[o,_,l,a,y,S].join(" ")}function q(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(T[r[e]]=r[e+1]);return T}function D(r){I.length>0||(r!==u?(T.SetUp="1",T.FEN=r):(delete T.SetUp,delete T.FEN))}function K(r){var e=m[d[r]];return e?{type:e.type,color:e.color}:null}function Q(r,e){if(!("type"in r)||!("color"in r))return!1;if(-1==="pnbrqkPNBRQK".indexOf(r.type.toLowerCase()))return!1;if(!(e in d))return!1;var n=d[e];return(r.type!=f||b[r.color]==t||b[r.color]==n)&&(m[n]={type:r.type,color:r.color},r.type===f&&(b[r.color]=n),D(k()),!0)}function U(r,e,n,t,i){var f={color:_,from:e,to:n,flags:t,piece:r[e].type};return i&&(f.flags|=h.PROMOTION,f.promotion=i),r[n]?f.captured=r[n].type:t&h.EP_CAPTURE&&(f.captured=o),f}function x(r){function e(r,e,n,t,f){if(r[n].type!==o||0!==X(t)&&7!==X(t))e.push(U(r,n,t,f));else for(var u=["q","r",i,"n"],l=0,a=u.length;l<a;l++)e.push(U(r,n,t,f,u[l]))}var n=[],t=_,u=er(t),l={b:1,w:6},s=d.a8,p=d.h1,v=!1,g=void 0===r||!("legal"in r)||r.legal,E=void 0===r||!("piece"in r)||"string"!=typeof r.piece||r.piece.toLowerCase();if(void 0!==r&&"square"in r){if(!(r.square in d))return[];s=p=d[r.square],v=!0}for(var y=s;y<=p;y++)if(136&y)y+=7;else{var S=m[y];if(null!=S&&S.color===t)if(S.type!==o||!0!==E&&E!==o){if(!0===E||E===S.type)for(var I=0,T=c[S.type].length;I<T;I++){var w=c[S.type][I];for(P=y;!(136&(P+=w));){if(null!=m[P]){if(m[P].color===t)break;e(m,n,y,P,h.CAPTURE);break}if(e(m,n,y,P,h.NORMAL),"n"===S.type||"k"===S.type)break}}}else{var P=y+a[t][0];if(null==m[P]){e(m,n,y,P,h.NORMAL);var P=y+a[t][1];l[t]===X(y)&&null==m[P]&&e(m,n,y,P,h.BIG_PAWN)}for(I=2;I<4;I++){136&(P=y+a[t][I])||(null!=m[P]&&m[P].color===u?e(m,n,y,P,h.CAPTURE):P===C&&e(m,n,y,C,h.EP_CAPTURE))}}}if(!(!0!==E&&E!==f||v&&p!==b[t])){if(A[t]&h.KSIDE_CASTLE){var R=(L=b[t])+2;null!=m[L+1]||null!=m[R]||B(u,b[t])||B(u,L+1)||B(u,R)||e(m,n,b[t],R,h.KSIDE_CASTLE)}if(A[t]&h.QSIDE_CASTLE){var L;R=(L=b[t])-2;null!=m[L-1]||null!=m[L-2]||null!=m[L-3]||B(u,b[t])||B(u,L-1)||B(u,R)||e(m,n,b[t],R,h.QSIDE_CASTLE)}}if(!g)return n;var O=[];for(y=0,T=n.length;y<T;y++)z(n[y]),M(t)||O.push(n[y]),J();return O}function $(r,e){var n="";if(r.flags&h.KSIDE_CASTLE)n="O-O";else if(r.flags&h.QSIDE_CASTLE)n="O-O-O";else{if(r.piece!==o){var t=function(r,e){for(var n=r.from,t=r.to,o=r.piece,i=0,f=0,u=0,l=0,a=e.length;l<a;l++){var c=e[l].from,s=e[l].to;o===e[l].piece&&n!==c&&t===s&&(i++,X(n)===X(c)&&f++,Y(n)===Y(c)&&u++)}if(i>0)return f>0&&u>0?rr(n):u>0?rr(n).charAt(1):rr(n).charAt(0);return""}(r,e);n+=r.piece.toUpperCase()+t}r.flags&(h.CAPTURE|h.EP_CAPTURE)&&(r.piece===o&&(n+=rr(r.from)[0]),n+="x"),n+=rr(r.to),r.flags&h.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return z(r),W()&&(G()?n+="#":n+="+"),J(),n}function j(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function B(r,t){for(var i=d.a8;i<=d.h1;i++)if(136&i)i+=7;else if(null!=m[i]&&m[i].color===r){var f=m[i],u=i-t,l=u+119;if(s[l]&1<<v[f.type]){if(f.type===o){if(u>0){if(f.color===n)return!0}else if(f.color===e)return!0;continue}if("n"===f.type||"k"===f.type)return!0;for(var a=p[l],c=i+a,g=!1;c!==t;){if(null!=m[c]){g=!0;break}c+=a}if(!g)return!0}}return!1}function M(r){return B(er(r),b[r])}function W(){return M(_)}function G(){return W()&&0===x().length}function F(){return!W()&&0===x().length}function H(){for(var r={},e=[],n=0,t=0,o=d.a8;o<=d.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var f=m[o];f&&(r[f.type]=f.type in r?r[f.type]+1:1,f.type===i&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r[i]||1===r.n))return!0;if(n===r[i]+2){var u=0,l=e.length;for(o=0;o<l;o++)u+=e[o];if(0===u||u===l)return!0}return!1}function Z(){for(var r=[],e={},n=!1;;){var t=J();if(!t)break;r.push(t)}for(;;){var o=k().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;z(r.pop())}return n}function z(r){var n=_,i=er(n);if(function(r){I.push({move:r,kings:{b:b.b,w:b.w},turn:_,castling:{b:A.b,w:A.w},ep_square:C,half_moves:y,move_number:S})}(r),m[r.to]=m[r.from],m[r.from]=null,r.flags&h.EP_CAPTURE&&(_===e?m[r.to-16]=null:m[r.to+16]=null),r.flags&h.PROMOTION&&(m[r.to]={type:r.promotion,color:n}),m[r.to].type===f){if(b[m[r.to].color]=r.to,r.flags&h.KSIDE_CASTLE){var u=r.to-1,l=r.to+1;m[u]=m[l],m[l]=null}else if(r.flags&h.QSIDE_CASTLE){u=r.to+1,l=r.to-2;m[u]=m[l],m[l]=null}A[n]=""}if(A[n])for(var a=0,c=E[n].length;a<c;a++)if(r.from===E[n][a].square&&A[n]&E[n][a].flag){A[n]^=E[n][a].flag;break}if(A[i])for(a=0,c=E[i].length;a<c;a++)if(r.to===E[i][a].square&&A[i]&E[i][a].flag){A[i]^=E[i][a].flag;break}C=r.flags&h.BIG_PAWN?"b"===_?r.to-16:r.to+16:t,r.piece===o||r.flags&(h.CAPTURE|h.EP_CAPTURE)?y=0:y++,_===e&&S++,_=er(_)}function J(){var r=I.pop();if(null==r)return null;var n=r.move;b=r.kings,_=r.turn,A=r.castling,C=r.ep_square,y=r.half_moves,S=r.move_number;var t,i,f=_,u=er(_);if(m[n.from]=m[n.to],m[n.from].type=n.piece,m[n.to]=null,n.flags&h.CAPTURE)m[n.to]={type:n.captured,color:u};else if(n.flags&h.EP_CAPTURE){var l;l=f===e?n.to-16:n.to+16,m[l]={type:o,color:u}}n.flags&(h.KSIDE_CASTLE|h.QSIDE_CASTLE)&&(n.flags&h.KSIDE_CASTLE?(t=n.to+1,i=n.to-1):n.flags&h.QSIDE_CASTLE&&(t=n.to-2,i=n.to+1),m[t]=m[i],m[i]=null);return n}function V(r,e){var n=j(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var i=t[1],u=t[2],l=t[3],a=t[4]}var c=function(r){var e=r.charAt(0);if(e>="a"&&e<="h"){if(r.match(/[a-h]\d.*[a-h]\d/))return;return o}return"o"===(e=e.toLowerCase())?f:e}(n),s=null,p=x({legal:!0,piece:i||c});if(s=p,e){var v=x({legal:!1,piece:i||c});s=v}for(var g=0,h=s.length;g<h;g++){if(n===j($(s[g],p))||e&&n===j($(s[g],v)))return s[g];if(t&&(!i||i.toLowerCase()==s[g].piece)&&d[u]==s[g].from&&d[l]==s[g].to&&(!a||a.toLowerCase()==s[g].promotion))return s[g]}return null}function X(r){return r>>4}function Y(r){return 15&r}function rr(r){var e=Y(r),n=X(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function er(r){return r===n?e:n}function nr(r){var e=tr(r);e.san=$(e,x({legal:!0})),e.to=rr(e.to),e.from=rr(e.from);var n="";for(var t in h)h[t]&e.flags&&(n+=g[t]);return e.flags=n,e}function tr(r){var e=r instanceof Array?[]:{};for(var n in r)e[n]="object"==typeof n?tr(r[n]):r[n];return e}function or(r){return r.replace(/^\s+|\s+$/g,"")}function ir(r){for(var e=x({legal:!1}),n=0,t=_,o=0,i=e.length;o<i;o++){if(z(e[o]),!M(t))if(r-1>0)n+=ir(r-1);else n++;J()}return n}return O(void 0===r?u:r),{WHITE:n,BLACK:e,PAWN:o,KNIGHT:"n",BISHOP:i,ROOK:"r",QUEEN:"q",KING:f,SQUARES:function(){for(var r=[],e=d.a8;e<=d.h1;e++)136&e?e+=7:r.push(rr(e));return r}(),FLAGS:g,load:function(r){return O(r)},reset:function(){return L()},moves:function(r){for(var e=x(r),n=[],t=0,o=e.length;t<o;t++)void 0!==r&&"verbose"in r&&r.verbose?n.push(nr(e[t])):n.push($(e[t],x({legal:!0})));return n},in_check:function(){return W()},in_checkmate:function(){return G()},in_stalemate:function(){return F()},in_draw:function(){return y>=100||F()||H()||Z()},insufficient_material:function(){return H()},in_threefold_repetition:function(){return Z()},game_over:function(){return y>=100||G()||F()||H()||Z()},validate_fen:function(r){return N(r)},fen:function(){return k()},board:function(){for(var r=[],e=[],n=d.a8;n<=d.h1;n++)null==m[n]?e.push(null):e.push({type:m[n].type,color:m[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in T)t.push("["+i+' "'+T[i]+'"]'+e),o=!0;o&&I.length&&t.push(e);for(var f=function(r){var e=w[k()];void 0!==e&&(r=`${r}${r.length>0?" ":""}{${e}}`);return r},u=[];I.length>0;)u.push(J());var l=[],a="";for(0===u.length&&l.push(f(""));u.length>0;){a=f(a);var c=u.pop();I.length||"b"!==c.color?"w"===c.color&&(a.length&&l.push(a),a=S+"."):a=S+". ...",a=a+" "+$(c,x({legal:!1})),z(c)}if(a.length&&l.push(f(a)),void 0!==T.Result&&l.push(T.Result),0===n)return t.join("")+l.join(" ");var s=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},p=function(r,o){for(var i of o.split(" "))if(i){if(r+i.length>n){for(;s();)r--;t.push(e),r=0}t.push(i),r+=i.length,t.push(" "),r++}return s()&&r--,r},v=0;for(i=0;i<l.length;i++)v+l[i].length>n&&l[i].includes("{")?v=p(v,l[i]):(v+l[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),v=0):0!==i&&(t.push(" "),v++),t.push(l[i]),v+=l[i].length);return t.join("")},load_pgn:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy;function t(r){return r.replace(/\\/g,"\\")}var o="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+t(o)+")|.)*\\])(?:"+t(o)+"){2}"),f=i.test(r)?i.exec(r)[1]:"";L();var u=function(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",o={},i=r.split(new RegExp(t(n))),f="",u="",l=0;l<i.length;l++)f=i[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[l].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),or(f).length>0&&(o[f]=u);return o}(f,e);for(var a in u)q([a,u[a]]);if(!("1"!==u.SetUp||"FEN"in u&&O(u.FEN,!0)))return!1;for(var c=function(r){return`{${function(r){return Array.from(r).map((function(r){return r.charCodeAt(0)<128?r.charCodeAt(0).toString(16):encodeURIComponent(r).replace(/\%/g,"").toLowerCase()})).join("")}((r=r.replace(new RegExp(t(o),"g")," ")).slice(1,r.length-1))}}`},s=function(r){if(r.startsWith("{")&&r.endsWith("}"))return function(r){return 0==r.length?"":decodeURIComponent("%"+r.match(/.{1,2}/g).join("%"))}(r.slice(1,r.length-1))},p=r.replace(f,"").replace(new RegExp(`({[^}]*})+?|;([^${t(o)}]*)`,"g"),(function(r,e,n){return void 0!==e?c(e):" "+c(`{${n.slice(1)}}`)})).replace(new RegExp(t(o),"g")," "),v=/(\([^\(\)]+\))+?/g;v.test(p);)p=p.replace(v,"");var g=or(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));g=g.join(",").replace(/,,+/g,",").split(",");for(var h="",d=0;d<g.length-1;d++){var E=s(g[d]);if(void 0===E){if(null==(h=V(g[d],n)))return!1;z(h)}else w[k()]=E}if(void 0!==(E=s(g[g.length-1]))&&(w[k()]=E,g.pop()),h=g[g.length-1],l.indexOf(h)>-1)(function(r){for(var e in r)return!0;return!1})(T)&&void 0===T.Result&&q(["Result",h]);else{if(null==(h=V(h,n)))return!1;z(h)}return!0},header:function(){return q(arguments)},ascii:function(){return function(){for(var r="   +------------------------+\n",e=d.a8;e<=d.h1;e++){if(0===Y(e)&&(r+=" "+"87654321"[X(e)]+" |"),null==m[e])r+=" . ";else{var t=m[e].type;r+=" "+(m[e].color===n?t.toUpperCase():t.toLowerCase())+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return _},move:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy,t=null;if("string"==typeof r)t=V(r,n);else if("object"==typeof r)for(var o=x(),i=0,f=o.length;i<f;i++)if(r.from===rr(o[i].from)&&r.to===rr(o[i].to)&&(!("promotion"in o[i])||r.promotion===o[i].promotion)){t=o[i];break}if(!t)return null;var u=nr(t);return z(t),u},undo:function(){var r=J();return r?nr(r):null},clear:function(){return P()},put:function(r,e){return Q(r,e)},get:function(r){return K(r)},remove:function(r){return function(r){var e=K(r);return m[d[r]]=null,e&&e.type===f&&(b[e.color]=t),D(k()),e}(r)},perft:function(r){return ir(r)},square_color:function(r){if(r in d){var e=d[r];return(X(e)+Y(e))%2==0?"light":"dark"}return null},history:function(r){for(var e=[],n=[],t=(void 0!==r&&"verbose"in r&&r.verbose);I.length>0;)e.push(J());for(;e.length>0;){var o=e.pop();t?n.push(nr(o)):n.push($(o,x({legal:!0}))),z(o)}return n},get_comment:function(){return w[k()]},set_comment:function(r){w[k()]=r.replace("{","[").replace("}","]")},delete_comment:function(){var r=w[k()];return delete w[k()],r},get_comments:function(){return R(),Object.keys(w).map((function(r){return{fen:r,comment:w[r]}}))},delete_comments:function(){return R(),Object.keys(w).map((function(r){var e=w[r];return delete w[r],{fen:r,comment:e}}))}}};"undefined"!=typeof exports&&(exports.Chess=Chess),"undefined"!=typeof define&&define((function(){return Chess}));
//# sourceMappingURL=/sm/b45f118b2fb633f2d2d608a8dfb989d88873459a77503e43a8cf3b898f00f943.map